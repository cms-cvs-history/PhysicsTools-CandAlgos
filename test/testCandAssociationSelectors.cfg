process TestCandAssociationSelectors = {

  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  service = Timing { } 

  untracked PSet maxEvents = { untracked int32 input = 100 }

  # this test assumes there are Z->e+e- in the input file
  source = PoolSource {
    untracked vstring fileNames = { "file:cands.root" }
  }

  module isolatedSelectedLeptons = CandDoubleAssociationVectorSelector {
    InputTag association = leptonIsolations
    string cut = "pt > 5"
    double max = 2
  }

  module out = PoolOutputModule {
    untracked string fileName = "selCands.root"
    untracked vstring outputCommands = {
      "drop *",
      "keep *_leptons_*_*",
      "keep *_leptonIsolations_*_*",
      "keep *_*_*_TestCandAssociationSelectors"
    }
  }

  module printEventNumber = AsciiOutputModule { 
  }

  path select = { 
    isolatedSelectedLeptons
  }
 	
  endpath ep = { printEventNumber, out }
}
